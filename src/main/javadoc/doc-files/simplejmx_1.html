<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on August, 21 2012 by texi2html 1.70 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<head>
<title>SimpleJMX Package: 1. Getting Started</title>

<meta name="description" content="SimpleJMX Package: 1. Getting Started">
<meta name="keywords" content="SimpleJMX Package: 1. Getting Started">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.70">
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="NOD2"></a>
<a name="SEC1"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC2" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[ &lt;&lt; ]</td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 1. Getting Started </h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC2">1.1 Downloading SimpleJMX Jar</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Downloading the SimpleJMX jar.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC3">1.2 Starting a JMX Server</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Starting a JMX server.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC4">1.3 Registering Objects Using JMX</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Registering objects for publishing over JMX.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC5">1.4 Naming Objects In JMX</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             How to name the objects in JMX.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC8">1.5 Exposing Fields and Methods Over JMX</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             How to expose fields and methods over JMX.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC12">1.9 Publishing Using Code Definitions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    How to define the name and exposed items programmatically.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC13">1.10 Using the JMX Client</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Using the programmatic JMX client.
</td></tr>
</table>

<hr size="6">
<a name="NOD3"></a>
<a name="SEC2"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC1" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC3" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 1.1 Downloading SimpleJMX Jar </h2>

<p>To get started with SimpleJMX, you will need to download the jar files.  The <a href="http://256.com/sources/simplejmx/">SimpleJMX release page</a>
is the default repository but the jars are also available from the <a href="http://repo1.maven.org/maven2/com/j256/simplejmx/">central maven repository</a> and from <a href="http://sourceforge.net/projects/simplejmx/files/">Sourceforge</a>.

</p><p>The code works with Java 5 or later.

</p><hr size="6">
<a name="NOD4"></a>
<a name="SEC3"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC2" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC4" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 1.2 Starting a JMX Server </h2>

<p>The <code>JmxServer</code> class is used to publish a JMX server to which can be connected jconsole and other JMX clients.
The basic way to do this is to choose a port to use and define the server and then start it is the following:

</p><table><tr><td>&nbsp;</td><td><pre class="example">// create a new JMX server listening on a port
JmxServer jmxServer = new JmxServer(8000);
// start our server
jmxServer.start();
</pre></td></tr></table>
<p>When your program exits, it is better to stop the server so something like the following try/finally block is a good
pattern to use:

</p><table><tr><td>&nbsp;</td><td><pre class="example">// create a new JMX server listening on a port
JmxServer jmxServer = new JmxServer(8000);
try {
   // start our server
   jmxServer.start();
   ...
   // register objects with the server anddo other stuff here
   ...
} finally {
   // un-register objects
   // stop our server
   jmxServer.stop();
}
</pre></td></tr></table>
<p>See the next manual section about object registration.

</p><hr size="6">
<a name="NOD5"></a>
<a name="SEC4"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC3" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC5" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 1.3 Registering Objects Using JMX </h2>

<p>Registering objects is what you do to get them published via the server via JMX.  The basic way to do this is to call:

</p><table><tr><td>&nbsp;</td><td><pre class="example">jmxServer.register(someObject);
</pre></td></tr></table>
<p>There also is an <code>unregister(...)</code> method which will un-publish from the server:

</p><table><tr><td>&nbsp;</td><td><pre class="example">jmxServer.unregister(someObject);
</pre></td></tr></table>
<p>The objects that are registered must be named and the fields and methods that are to be exposed must be specified.

</p><hr size="6">
<a name="NOD6"></a>
<a name="SEC5"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC4" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 1.4 Naming Objects In JMX </h2>

<p>When you publish your objects you need to tell JMX what it's name is and where it should be located in the various
folders shown by jconsole.  There are a couple of different ways to do this with SimpleJMX:

</p><table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC6">1.4.1 SimpleJMX @JmxResource Annotation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Using the SimpleJMX @JmxResource Annotation
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC7">1.4.2 Self Naming Objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   Allow the object to name itself
</td></tr>
</table>

<hr size="6">
<a name="NOD7"></a>
<a name="SEC6"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC5" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC7" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC5" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 1.4.1 SimpleJMX @JmxResource Annotation </h3>

<p>SimpleJMX includes the <code>@JmxResource</code> annotation which is used to define that the resource is to be published
via JMX and how it is to be named.

</p><a name="IDX5"></a>
<a name="IDX6"></a>
<table><tr><td>&nbsp;</td><td><pre class="example">@JmxResource(domainName = &quot;j256&quot;, description = &quot;Runtime counter&quot;)
public class RuntimeCounter {
   ...
</pre></td></tr></table>
<p>The above example shows that the <code>RunetimeCounter</code> object is to be published via JMX inside of the <code>j256</code> folder
with a text description.  The fields in <code>@JmxResource</code> are:

</p><dl compact="compact">
<dd>
<a name="IDX7"></a>
</dd>
<dt><code> domainName</code></dt>
<dd>
<p>Domain name of the object which turns into the top-level folder inside of jconsole.  This must be specified unless the
object is self-naming.  See section <a href="#SEC7">Self Naming Objects</a>.

</p><a name="IDX8"></a>
</dd>
<dt><code> beanName</code></dt>
<dd>
<p>Name of the JMX object in the jconsole folder.  The default is to use the class name.

</p><a name="IDX9"></a>
<a name="IDX10"></a>
<a name="IDX11"></a>
</dd>
<dt><code> folderNames</code></dt>
<dd>
<p>Other strings which which translate into sub-folders below the domain-name that was specified above. Default is the
object will show up at the top below the domain-name folder.  They can either be in <code>name=value</code> format in which case
they should be in alphabetic order by name. They can also just be in <code>value</code> format in which case a <code>##</code> prefix
(ex. <code>00=...</code>) will be added by the code.

</p><p>Folders are used when you have a large number of JMX objects being published and you want to group the objects so that
you can find them faster than scrolling through a large list of objects.  For example, all of your database objects
could go in the folder &quot;Database&quot; while the database connections could go into the sub-folder &quot;Database/Connections&quot;.

</p><table><tr><td>&nbsp;</td><td><pre class="example">@JmxResource(domainName = &quot;j256&quot;, folderNames = { &quot;Counters&quot; },
    description = &quot;Runtime counter&quot;)
public class RuntimeCounter {
</pre></td></tr></table>
<a name="IDX12"></a>
<a name="IDX13"></a>
</dd>
<dt><code> description</code></dt>
<dd>
<p>Textual description of the class for jconsole or other JMX clients. Default is something like: &quot;Information about class-name&quot;.

</p></dd>
</dl>

<hr size="6">
<a name="NOD8"></a>
<a name="SEC7"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC6" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC8" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC5" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 1.4.2 Self Naming Objects </h3>

<p>Instead of using the <code>@JmxResource</code> annotation to define the name/folders for your JMX object, you can have the
object implement the <code>JmxSelfNaming</code> interface.  This allows the object to name itself and will override any settings
from the <code>@JmxResource</code> annotation, if specified at all.

</p><a name="IDX14"></a>
<a name="IDX15"></a>
<p>It is particularly useful and actually necessary to make your object <code>JmxSelfNaming</code> if there are to be multiple of 
them published via JMX.  For example, if you have multiple database connections that you want to publish then they all
can't have the same name in JMX.

</p><table><tr><td>&nbsp;</td><td><pre class="example">// we only use this to set the domain name and the folders
@JmxResource(domainName = &quot;j256&quot;, folderNames = { &quot;Database&quot;, &quot;Connections&quot; })
public class DatabaseConnection extends BaseJmxSelfNaming
      implements JmxSelfNaming {
    @Override
   	public String getJmxNameOfObject() {
   	    // return our toString as our name
        return toString();
    }
}
</pre></td></tr></table>
<p>In the above example, we extend the <code>BaseJmxSelfNaming</code> which has default implementations for all of the
<code>JmxSelfNaming</code> method so all we need to do is override what we want to change.

</p><p>The methods in the <code>JmxSelfNaming</code> interface are:

</p><dl compact="compact">
<dt><code> String getJmxDomainName();</code></dt>
<dd>
<p>Return the domain name of the object. Return null to use the one from the <code>@JmxResource</code> annotation instead.

</p></dd>
<dt><code> String getJmxNameOfObject();</code></dt>
<dd>
<p>Return the name of the object. Return null to use the one from the <code>@JmxResource</code> annotation instead.

</p></dd>
<dt><code> JmxFolderName[] getJmxFolderNames();</code></dt>
<dd>
<p>Return the appropriate array of folder names used to built the associated object name. Return null for no
folders in which case the bean will be at the top of the hierarchy in jconsole without any sub-folders.

</p></dd>
</dl>

<hr size="6">
<a name="NOD9"></a>
<a name="SEC8"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC7" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC9" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 1.5 Exposing Fields and Methods Over JMX </h2>

<p>Once we have named our object, we need to tell the JMX server which fields and methods should be exposed to the outside world.  JMX can expose
what it calls attributes, operations, and notifications.  At this time, only attributes and operations are supported.

</p><p>Attributes can be primitives or simple types such as <code>String</code> or <code>java.util.Date</code>.  With SimpleJMX you can expose them by using reflection
on the objects fields directly using the <code>@JmxAttributeField</code> annotation or via the get/set/is methods using the <code>@JmxAttributeMethod</code>
annotation.

</p><p>Operations are methods that do <em>not</em> start with get/set/is but which perform some function (ex: <code>resetTimer()</code>,
<code>clearCache()</code>, etc.).  They can be exposed with the <code>@JmxOperation</code> annotation.

</p><table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC9">1.6 @JmxAttributeField Annotation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Using the SimpleJMX @JmxAttributeField Annotation
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC10">1.7 @JmxAttributeMethod Annotation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Using the SimpleJMX @JmxAttributeMethod Annotation
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC11">1.8 @JmxOperation Annotation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Using the SimpleJMX @JmxOperation Annotation
</td></tr>
</table>

<hr size="6">
<a name="NOD10"></a>
<a name="SEC9"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC8" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC10" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 1.6 @JmxAttributeField Annotation </h2>


<p>SimpleJMX allows you to publish your primitive or simple types by annotating your fields with the <code>@JmxAttributeField</code>
annotation.

</p><table><tr><td>&nbsp;</td><td><pre class="example">@JmxAttributeField(description = &quot;Show runtime in seconds&quot;,
   isWritable = true)
private boolean showSeconds;
</pre></td></tr></table>
<a name="IDX16"></a>
<p>In the above example, the <code>showSeconds</code> boolean field will be visible via JMX.  It will show its value which can be
changed because <code>isWriable</code> is set to true.  The description is available in jconsole when you hover over the attribute.

</p><p>The fields in the <code>@JmxAttributeField</code> annotation are:

</p><dl compact="compact">
<dt><code> String description</code></dt>
<dd>
<p>Description of the attribute for jconsole. Default is something like: &quot;someField attribute&quot;.

</p></dd>
<dt><code> boolean isReadible</code></dt>
<dd>
<a name="IDX17"></a>
<p>Set to false if the field should not be read through JMX. Default is true.

</p></dd>
<dt><code> boolean isWritable</code></dt>
<dd>
<p>Set to true if the field can be written by JMX. Default is false.

</p></dd>
</dl>

<hr size="6">
<a name="NOD11"></a>
<a name="SEC10"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC9" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC11" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 1.7 @JmxAttributeMethod Annotation </h2>


<p>Instead of publishing the fields directly, SimpleJMX also allows you to publish your attributes by decorating the
get/set/is methods using the <code>@JmxAttributeMethod</code> annotation.  This is <em>only</em> for methods that start
with <code>getXxx()</code>, <code>setXxx(...)</code>, or <code>isXxx()</code>.

</p><p>The <code>Xxx</code> name should match precisely to line up the get and set JMX features. For example, if you are getting and setting the
<code>fooBar</code> field then it should be <code>getFooBar()</code> and <code>setFooBar(...)</code>.  <code>isFooBar()</code> is also allowed if <code>foobar</code>
is a <code>boolean</code> or <code>Boolean</code> field.

</p><p>Notice that although the field-name is <code>fooBar</code> with a lowercase 'f', the method name camel-cases it and turns
it into <code>getFooBar()</code> with a capital 'F'.  In addition, the <code>getXxx()</code> method must not return void and must have no arguments.
The <code>setXxx(...)</code> method must return <code>void</code> and must take a single argument.  The <code>isXxx()</code> method is allowed if it
returns boolean or Boolean and the method has no arguments.

</p><p>Exposing a get method also allows you to do some data conversion when the value is published.  Exposing a set method allows you
to do data validation.

</p><table><tr><td>&nbsp;</td><td><pre class="example">@JmxAttributeMethod(description = &quot;Run time in seconds or milliseconds&quot;)
public long getRunTime() {
</pre></td></tr></table>
<p>The only field ins the <code>@JmxAttributeMethod</code> annotation is the description.  The annotation on the <code>get...</code> method shows that it
is readable and the annotation on the <code>set...</code> method shows that it is writable.

</p><hr size="6">
<a name="NOD12"></a>
<a name="SEC11"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC10" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC12" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 1.8 @JmxOperation Annotation </h2>


<p>Operations are methods that do <em>not</em> start with get/set/is but which perform some function.  They can be exposed with the
<code>@JmxOperation</code> annotation.  It can be added only to methods that are <em>not</em> named <code>get...</code>, <code>set...</code>, or <code>is...</code>. The
method can either return <code>void</code> or an object. It is recommended that the method return a primitive or a simple object that will
be for sure in jconsole's classpath.  It also should not throw an unknown <code>Exception</code> class.

</p><p>The fields in the <code>@JmxOperation</code> annotation are:

</p><dl compact="compact">
<dt><code> String description</code></dt>
<dd>
<p>Description of the attribute for jconsole. Default is something like &quot;someMethod operation&quot;.

</p></dd>
<dt><code> String[] parameterNames</code></dt>
<dd>
<p>Array of optional strings which gives the name of each of the method parameters.  The array should be the
same length as the <code>parameterDescriptions</code> array. Default is something like &quot;p0&quot;.

</p><table><tr><td>&nbsp;</td><td><pre class="example">@JmxOperation(parameterNames = { &quot;minValue&quot;, &quot;maxValue&quot; },
   parameterDescriptions = { &quot;low water mark&quot;,
      &quot;high water mark&quot; }
public void resetMaxMin(int minValue, int maxValue) {
   ...
</pre></td></tr></table>
</dd>
<dt><code> String[] parameterDescriptions</code></dt>
<dd>
<p>Array of optional strings which describes each of the method parameters. The array should be the same
length as the <code>parameterNames</code> array.

</p></dd>
<dt><code> OperationAction operationAction</code></dt>
<dd>
<p>This optional field is used by the JMX system to describe what sort of work is being done in this operation.

</p></dd>
</dl>

<hr size="6">
<a name="NOD13"></a>
<a name="SEC12"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC11" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC13" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 1.9 Publishing Using Code Definitions </h2>

<p>Sometimes, you want to expose a class using JMX but you don't control the source code or maybe you don't want to put the SimpleJMX
annotations everywhere.  If this is the case then you also have the option to expose just about any object programmatically.

</p><p>The <code>JmxServer</code> has a register function which takes just an <code>Object</code>, its <code>ObjectName</code>, and an array of
attribute-fields, attribute-methods, and operations.

</p><table><tr><td>&nbsp;</td><td><pre class="example">jmxServer.register(someObject,
   ObjectNameUtil.makeObjectName(&quot;j256&quot;, &quot;SomeObject&quot;),
   attributeFieldInfos, attributeMethodInfos, operationInfos);
</pre></td></tr></table> 
<p>The attribute-fields are specified as an array of <code>JmxAttributeFieldInfo</code> objects that are associated with fields that are
exposed through reflection:

</p><table><tr><td>&nbsp;</td><td><pre class="example">JmxAttributeFieldInfo[] attributeFieldInfos =
   new JmxAttributeFieldInfo[] {
     new JmxAttributeFieldInfo(&quot;startMillis&quot;, true /* readable */,
        false /* not writable */, &quot;When our timer started&quot;),
   };
</pre></td></tr></table>  

<p>The attribute-methods are specified as an array of <code>JmxAttributeMethodInfo</code> objects that are associated with fields that are
exposed through get/set/is methods:

</p><table><tr><td>&nbsp;</td><td><pre class="example">JmxAttributeMethodInfo[] attributeMethodInfos =
   new JmxAttributeMethodInfo[] {
      new JmxAttributeMethodInfo(&quot;getRunTime&quot;,
         &quot;Run time in seconds or milliseconds&quot;),
   };
</pre></td></tr></table>
<p>The operations are specified as an array of <code>JmxOperationInfo</code> objects that are associated with operation methods:

</p><table><tr><td>&nbsp;</td><td><pre class="example">JmxOperationInfo[] operationInfos =
   new JmxOperationInfo[] {
      new JmxOperationInfo(&quot;restartTimer&quot;, null /* no params */,
         null  /* no params */, OperationAction.UNKNOWN,
         &quot;Restart the timer&quot;),
   };
</pre></td></tr></table>
<p>Take a look at the random-object example test for a working example.  See <a href="simplejmx_2.html#ANC1">random object example</a>.

</p><hr size="6">
<a name="NOD14"></a>
<a name="SEC13"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC12" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 1.10 Using the JMX Client </h2>

<p>SimpleJMX also includes a programmatic, simple JMX client which you can use to interrogate JMX servers.  You
connect to the server by specifying the host/port of the server.

</p><table><tr><td>&nbsp;</td><td><pre class="example">JmxClient = client = new JmxClient(&quot;server1&quot;, 8000);
</pre></td></tr></table>
<p>You can then get attributes:

</p><table><tr><td>&nbsp;</td><td><pre class="example">boolean showSeconds =
    jmxClient.getAttribute(&quot;j256&quot;, &quot;RuntimeCounter&quot;, &quot;showSeconds&quot;);
</pre></td></tr></table>
<p>If you need to construct the object name directly then you can use <code>ObjectName</code> static methods:

</p><table><tr><td>&nbsp;</td><td><pre class="example">int availableProcessors = 
   client.getAttribute(
      ObjectName.getInstance(&quot;java.lang:type=OperatingSystem&quot;),
      &quot;AvailableProcessors&quot;);
</pre></td></tr></table>
<p>You can also call operations:

</p><table><tr><td>&nbsp;</td><td><pre class="example">client.invokeOperation(
   ObjectName.getInstance(&quot;java.lang:type=Memory&quot;),
   &quot;gc&quot;);
</pre></td></tr></table>
<p>You can also list the available attributes and operations and do a number of other things.  See the <code>JmxClient</code>
javadocs for more information

</p><hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_2.html#SEC14" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="simplejmx.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_4.html#SEC16" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="simplejmx_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>Gray Watson</em> on <em>August, 21 2012</em> using <a href="http://texi2html.cvshome.org/"><em>texi2html 1.70</em></a>.
 </font>
 <br>

</p>
</body>
</html>
